# 共振峰锁定功能说明

## 功能概述
在频谱镜子模块中新增了**共振峰锁定**功能，让你可以更仔细地观察发声时的共振峰特征。

## 核心特性

### 1. 自动检测发声
- 系统会自动检测你何时正在发声（基于能量阈值）
- 发声时会自动捕获当前的共振峰数据

### 2. 发声保持显示
- 发声结束后，共振峰会**自动保持显示3秒**
- 在这3秒内，你可以仔细观察刚才发声的共振峰特征
- 左上角会显示倒计时："⏱️ 保持 Xs"

### 3. 手动锁定/解锁
- 点击**"锁定共振峰"**按钮，可以手动锁定当前显示的共振峰
- 锁定后：
  - 按钮变为黄色，图标变为🔒
  - 共振峰会一直显示，不会消失
  - 左上角显示："🔒 已锁定"
- 再次点击"解锁共振峰"即可恢复实时模式

## 使用场景

### 场景1：观察单个音节的共振峰
1. 启动实时监测
2. 发出一个音节（如"啊"）
3. 发声结束后3秒内观察共振峰
4. 如需更长时间观察，点击"锁定共振峰"

### 场景2：对比不同发音
1. 发出第一个音（如"i"）
2. 点击"锁定共振峰"固定当前数据
3. 记录F1、F2等数值
4. 点击"解锁共振峰"
5. 发出第二个音（如"u"）
6. 对比两次的共振峰差异

## 状态指示

左上角的共振峰信息框会显示当前状态：

- **🔄 实时**：正在实时更新共振峰
- **🎤 发声中**：检测到发声，正在捕获共振峰
- **⏱️ 保持 3s**：发声结束，共振峰保持显示中（倒计时）
- **🔒 已锁定**：共振峰已手动锁定，不会改变

## 技术参数

- **发声检测阈值**：-40 dB
- **保持时间**：3秒
- **共振峰范围**：
  - F1: 200-1200 Hz
  - F2: 600-3000 Hz
  - F3: 1400-4000 Hz
  - F4: 2000-5000 Hz

## 注意事项

1. 锁定功能只在**监测运行时**可用
2. 停止监测后，锁定状态会自动解除
3. 暂停监测不影响锁定状态
4. 锁定的是共振峰频率值，不是频谱图本身

## 实现细节

**优先级**：锁定的共振峰 > 发声时的共振峰 > 当前实时共振峰

这意味着：
- 如果手动锁定了，显示锁定的共振峰
- 如果没锁定但在3秒保持期内，显示发声时捕获的共振峰
- 否则显示当前实时检测的共振峰
